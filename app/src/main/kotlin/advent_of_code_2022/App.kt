/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package advent_of_code_2022

import advent_of_code_2022.day1.*
import advent_of_code_2022.day2.*

fun getEnvVar(key: String) = System.getenv(key) ?: exitWithMessage("Please set env var $key")

fun exitWithMessage(message: String) : Nothing {
    println(message)
    kotlin.system.exitProcess(1)
}

fun calculate(input: String, f: (String) -> String) = f(input)

class Days {
    companion object :  HashMap<String, () -> String>() {
        fun runCommand(key: String) =
            when (val command = this.get(key)) {
                null -> exitWithMessage("Days must be one of: ${this.keys.joinToString()}")
                else -> command()
            }

        fun register(key: String, value: () -> String) = apply {
            this[key] = value
        }

        init {
            Days
                .register("1A", day1A)
                .register("1B", day1B)
                .register("2A", day2A)
                .register("2B", day2B)
        }
    }
}



fun main() {
    val day = getEnvVar("DAY")
    println(Days.runCommand(day))
}